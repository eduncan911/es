
# env
    import "github.com/eduncan911/es/env"

Package env is the code contracts for an event sourced Environment that defines Events, EventHandlers, Modules and Specifications.







## type Container
``` go
type Container struct {
    Routes    []*api.Route
    Handlers  EventHandlerMap
    DataReset map[string]func()
}
```
Container represents the code contract implementation for a module









### func NewContainer
``` go
func NewContainer() *Container
```
NewContainer instantiates a new container




### func (\*Container) HandleEvents
``` go
func (c *Container) HandleEvents(
    name string,
    handler EventHandler,
)
```
HandleEvents registers the event handler internally



### func (\*Container) HandleHttp
``` go
func (c *Container) HandleHttp(
    method string,
    path string,
    handler api.Handler,
)
```
HandleHttp registers http handlers with api.Routes internally



### func (\*Container) ResetData
``` go
func (c *Container) ResetData(
    name string,
    reset func(),
)
```
ResetData is used to register func()s to rollback data changes



## type EventHandler
``` go
type EventHandler interface {
    // Contracts returns a string array of contracts for this handler
    Contracts() []string
    // HandlerEvent handles the event
    HandleEvent(e es.Event) error
}
```
EventHandler interface represents an event handler











## type EventHandlerMap
``` go
type EventHandlerMap map[string]EventHandler
```
EventHandlerMap is a map of regstered event handlers with a string as the key











## type Module
``` go
type Module interface {
    // Register takes a Registrar
    Register(r Registrar)
}
```
Module interface represents a functional package











## type Publisher
``` go
type Publisher interface {
    // Publish pushes one or more events onto the bus
    Publish(e ...es.Event) error
    // MustPublish pushes one or more events onto the bus with internal error handling
    MustPublish(e ...es.Event)
}
```
Publisher is an interface for publishing contracts











## type Registrar
``` go
type Registrar interface {
    HandleHttp(method string, path string, handler api.Handler)
    HandleEvents(name string, handler EventHandler)
    ResetData(name string, action func())
}
```
Registrar interface implements registration for a module











## type Request
``` go
type Request struct {
    Method  string
    Path    string
    Headers http.Header
    Body    interface{}
}
```
Request represents the method, path, headers and body of the request











## type Response
``` go
type Response struct {
    Status  int         `json:"status"`
    Headers http.Header `json:"headers"`
    Body    interface{} `json:"body"`
}
```
Response represents an http response that encapsulates the status, headers and body











## type Spec
``` go
type Spec struct {
    Name string
    //Factory Factory
    UseCases []UseCaseFactory
}
```
Spec implements a specification for the UseCase











## type UseCase
``` go
type UseCase struct {
    Name string

    Given        []es.Event
    When         *Request
    ThenEvents   []es.Event
    ThenResponse *Response

    Where Where
}
```
UseCase represents a BDD specification











## type UseCaseFactory
``` go
type UseCaseFactory func() *UseCase
```
UseCaseFactory is the function to execute the UseCase











## type Where
``` go
type Where interface {
    Map() map[string]string
}
```
Where defines a map of conditions

















- - -
Generated by [godoc2md](http://godoc.org/github.com/davecheney/godoc2md)